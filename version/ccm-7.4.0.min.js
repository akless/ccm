if(!window.jQuery){if(document.body){window.jQuery=document.createElement("script");window.jQuery.setAttribute("src","https://code.jquery.com/jquery-2.2.4.min.js");document.head.appendChild(window.jQuery)}else document.write('<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>')}if(!("registerElement"in document)){document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/document-register-element/0.5.3/document-register-element.js"></script>');document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.22/webcomponents-lite.min.js"></script>')}if(document.body){window.ccm=document.createElement("style");window.ccm.appendChild(document.createTextNode("@keyframes ccm_loading { to { transform: rotate(360deg); } }"));document.head.appendChild(window.ccm)}else document.write("<style>@keyframes ccm_loading { to { transform: rotate(360deg); } }</style>");ccm=function(){var components={};var db;var resources={};var stores={};var waiter={};var Datastore=function(){var callbacks=[];var my;this.init=function(callback){my=ccm.helper.privatize(this,"source","local","store","url","db","socket","onChange","user");this.source=function(){return my.source};if(my.socket)my.socket.onmessage=function(message){message=JSON.parse(message.data);if(message.callback)callbacks[message.callback-1](message.data);else{var dataset=jQuery.isPlainObject(message)?setLocal(message):delLocal(message);if(my.onChange)my.onChange(dataset)}};if(callback)callback()};this.get=function(key_or_query,callback){if(typeof key_or_query==="function"){callback=key_or_query;key_or_query={}}if(key_or_query===undefined)key_or_query={};if(my.url)return serverDB();if(my.store)return clientDB();if(my.local)return localCache();function localCache(){return getLocal(key_or_query,callback)}function clientDB(){var dataset=checkLocal();if(dataset)return dataset;var store=getStore();var request=store.get(key_or_query);request.onsuccess=function(evt){var dataset=evt.target.result;if(!dataset)return callback(null);if(dataset.key!==undefined)my.local[key_or_query]=dataset;if(callback)callback(dataset)}}function serverDB(){if(!jQuery.isPlainObject(key_or_query)){var dataset=checkLocal();if(dataset)return dataset}var data=prepareData({key:key_or_query});if(my.socket)useWebsocket(data,onResponse);else useHttp(data,onResponse);function onResponse(results){if(!checkResponse(results))return;if(!results){if(callback)callback(null);return}if(ccm.helper.isDataset(results))my.local[results.key]=results;else for(var i=0;i<results.length;i++)if(results[i].key!==undefined)my.local[results[i].key]=results[i];if(callback)callback(results)}}function checkLocal(){var dataset=getLocal(key_or_query);if(dataset&&callback)callback(dataset);return dataset}};this.set=function(priodata,callback){priodata=ccm.helper.clone(priodata);if(!priodata.key)priodata.key=ccm.helper.generateKey();if(my.url)return serverDB();if(my.store)return clientDB();if(my.local)return localCache();function localCache(){return setLocal(priodata,callback)}function clientDB(){var store=getStore();var request=store.put(priodata);request.onsuccess=localCache}function serverDB(){var data=prepareData({dataset:priodata});if(my.socket)useWebsocket(data,onResponse);else useHttp(data,onResponse);function onResponse(dataset){if(!checkResponse(dataset))return;priodata=dataset;localCache()}}};this.del=function(key,callback){if(my.url)return serverDB();if(my.store)return clientDB();if(my.local)return localCache();function localCache(){return delLocal(key,callback)}function clientDB(){var store=getStore();var request=store.delete(key);request.onsuccess=localCache}function serverDB(){var data=prepareData({del:key});if(my.socket)useWebsocket(data,onResponse);else useHttp(data,onResponse);function onResponse(dataset){if(!checkResponse(dataset))return;if(callback)callback(dataset);callback=undefined;localCache()}}};function getLocal(key,callback){if(key===undefined||ccm.helper.isObject(key))return find();var dataset=ccm.helper.clone(my.local[key])||null;solveDependencies(dataset,callback);return dataset;function find(){var results=[];var counter=1;for(var i in my.local){if(ccm.helper.isSubset(key,my.local[i])){var dataset=ccm.helper.clone(my.local[i]);results.push(dataset);counter++;solveDependencies(dataset,check)}}check();return results;function check(){counter--;if(counter===0&&callback)callback(results)}}function solveDependencies(dataset,callback){var counter=1;var waiter=[];search(dataset);check();function search(array_or_object){for(var key in array_or_object){var value=array_or_object[key];if(ccm.helper.isDependency(value))solveDependency(array_or_object,key);else if(Array.isArray(value)||ccm.helper.isObject(value))search(value)}}function solveDependency(dataset,key){if(stores[getSource(dataset[key][1])]===null)return waiter.push([solveDependency,dataset,key]);counter++;ccm.helper.solveDependency(dataset,key,check)}function check(){counter--;if(counter!==0)return;if(waiter.length>0)return ccm.helper.action(waiter.pop());if(callback)callback(dataset)}}}function setLocal(priodata,callback){if(my.local[priodata.key])ccm.helper.integrate(priodata,my.local[priodata.key]);else my.local[priodata.key]=priodata;return getLocal(priodata.key,callback)}function delLocal(key,callback){var dataset;if(key===undefined){dataset=my.local;my.local={}}else{dataset=my.local[key];delete my.local[key]}if(callback)callback(dataset);return dataset}function getStore(){var trans=db.transaction([my.store],"readwrite");return trans.objectStore(my.store)}function prepareData(data){data=ccm.helper.integrate(data,{db:my.db,store:my.store});if(my.user&&my.user.isLoggedIn())data=ccm.helper.integrate(data,{user:my.user.data().key,token:my.user.data().token});return data}function useWebsocket(data,callback){callbacks.push(callback);data.callback=callbacks.length;my.socket.send(JSON.stringify(data))}function useHttp(data,callback){ccm.load([my.url,data],callback)}function checkResponse(response){if(typeof response==="string"&&response.indexOf("[ccm]")===0){return false}return true}};return{callback:{},version:[7,4,0],load:function(){var counter=1;var results=[];var args=ccm.helper.makeIterable(arguments);var call=args.slice(0);call.unshift(ccm.load);var waiting=false;var callback;if(typeof args[args.length-1]==="function"||args[args.length-1]===undefined)callback=args.pop();args.map(loadResource);return check();function loadResource(url,i){var data;if(Array.isArray(url)){if(url.length>1&&ccm.helper.isObject(url[1])){data=url[1];url=url[0]}else{counter++;results[i]=[];return serial(null)}}var resource=resources[url];resources[url]=null;counter++;if(data)return exchangeData();var suffix=url.split(".").pop();switch(suffix){case"html":return loadHTML();case"css":return loadCSS();case"jpg":case"gif":case"png":case"svg":return loadImage();case"js":return loadJS();case"json":return loadJSON();default:exchangeData()}function serial(result){if(result!==null)results[i].push(result);if(url.length>0){var next=url.shift();if(Array.isArray(next)&&!(next.length>1&&ccm.helper.isObject(next[1]))){next.push(serial);ccm.load.apply(null,next)}else ccm.load(next,serial)}else check()}function loadHTML(){if(caching())return;if(url.indexOf("http")!==0)return jQuery.ajax({url:url,cache:false,dataType:"html",crossDomain:true,success:successData});var filename=url.split("/").pop();ccm.callback[filename]=successData;jQuery("head").append('<script src="'+url+'"></script>')}function loadCSS(){if(!resource)jQuery("head").append('<link rel="stylesheet" type="text/css" href="'+url+'">');success()}function loadImage(){if(!resource)jQuery('<img src="'+url+'">');success()}function loadJS(){if(caching())return;jQuery.getScript(url,success).fail(onFail)}function loadJSON(){if(caching())return;if(url.indexOf("http")!==0)return jQuery.getJSON(url,successData).fail(onFail);var filename=url.split("/").pop();ccm.callback[filename]=successData;jQuery("head").append('<script src="'+url+'"></script>')}function exchangeData(){if(waiting)return;if(url.indexOf("http")===0){jQuery.ajax({url:url,data:data,dataType:"jsonp",username:data&&data.username?data.username:undefined,password:data&&data.password?data.password:undefined,success:successData})}else{jQuery.ajax({url:url,data:data,username:data&&data.username?data.username:undefined,password:data&&data.password?data.password:undefined,success:successData}).fail(onFail)}}function caching(){if(resource===null){if(waiting)return true;else waiting=true;if(!waiter[url])waiter[url]=[];waiter[url].push(call);return true}if(resource){results[i]=resources[url]=resource;success();return true}return false}function successData(data){results[i]=resources[url]=data;success()}function success(){if(results[i]===undefined)results[i]=resources[url]=url;while(waiter[url]&&waiter[url].length>0)ccm.helper.action(waiter[url].pop());check()}function onFail(jqxhr,textStatus,error){console.log(jqxhr,this.url);jQuery("body").html(jqxhr.responseText+"<p>Request Failed: "+textStatus+", "+error+"</p>")}}function check(){counter--;if(counter===0){if(results.length<=1)results=results[0];if(callback)callback(results);return results}}},component:function(component,config,callback){if(typeof config==="function"){callback=config;config=undefined}if(typeof component==="string")return components[getIndex(component)]?finish():ccm.load(component,finish);setIndex();if(components[component.index])return finish();components[component.index]=component;setup();if(component.init){component.init(finish);delete component.init}else return finish();function setIndex(){if(component.index){var array=component.index.split("-");component.name=array[0];if(array.length>1){component.version=array[1].split(".");for(var i=0;i<3;i++)component.version[i]=parseInt(component.version[i])}}component.index=component.name;if(component.version)component.index+="-"+component.version.join(".")}function setup(){component.instances=0;component.instance=function(config,callback){return ccm.instance(component.index,config,callback)};component.render=function(config,callback){return ccm.render(component.index,config,callback)};if(!component.config)component.config={};if(!component.config.element)component.config.element=jQuery("body");createCustomElement();function createCustomElement(){var tag=Object.create(HTMLElement.prototype);tag.attachedCallback=function(){if(!document.body.contains(this))return;var config=ccm.helper.generateConfig(this);config.element=jQuery(this);component.render(config)};document.registerElement("ccm-"+component.index,{prototype:tag})}}function finish(){component=ccm.helper.clone(components[typeof component==="string"?getIndex(component):component.index]);component.config=ccm.helper.integrate(ccm.helper.clone(config),component.config);closure(component);if(callback)callback(component);return component;function closure(component){if(component.config){component.instance=function(config,callback){config=ccm.helper.integrate(config,ccm.helper.clone(component.config));return ccm.instance(component.index,config,function(instance){instance.component=component;if(callback)callback(instance)})};component.render=function(config,callback){config=ccm.helper.integrate(config,ccm.helper.clone(component.config));return ccm.render(component.index,config,function(instance){instance.component=component;if(callback)callback(instance)})}}}}},instance:function(component,config,callback){if(typeof config==="function"){callback=config;config=undefined}if(ccm.helper.isElement(config))config={element:config};var counter=0;var result;var waiter=[];return recursive(component,config);function recursive(comp,cfg,prev_cfg,prev_key,parent){var index=getIndex(comp);counter++;return!components[index]?ccm.load(comp,proceed):proceed();function proceed(){return ccm.helper.isDependency(cfg)?ccm.dataset(cfg[1],cfg[2],proceed):proceed(cfg);function proceed(cfg){var instance=new components[index].Instance;components[index].instances++;if(prev_cfg)prev_cfg[prev_key]=instance;if(parent)instance.parent=parent;if(!result)result=instance;ccm.helper.integrate(ccm.helper.clone(components[index].config),instance);if(cfg)ccm.helper.integrate(cfg,instance);instance.id=components[index].instances;instance.index=index+"-"+instance.id;instance.component=components[index];switch(instance.element){case"name":instance.element=ccm.helper.find(parent,"."+instance.component.name);break;case"parent":instance.element=parent.element;break;default:if(instance.element.selector)instance.element.selector=instance.element.selector.replace(/-(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)/g,function(match){return match.replace(/\./g,"\\.")})}solveDependencies(instance);return check();function solveDependencies(instance_or_array){for(var key in instance_or_array){var value=instance_or_array[key];if(ccm.helper.isDependency(value))solveDependency(instance_or_array,key);else if(typeof value==="object"&&value!==null){if(ccm.helper.isNode(value)||ccm.helper.isElement(value)||ccm.helper.isInstance(value)||ccm.helper.isComponent(value))continue;solveDependencies(value)}}function solveDependency(instance_or_array,key){var action=instance_or_array[key];switch(action[0]){case ccm.load:case"ccm.load":counter++;if(action.length===2)ccm.load(action[1],setResult);else{action.shift();ccm.load(action,setResult)}break;case ccm.component:case"ccm.component":counter++;ccm.component(action[1],action[2],setResult);break;case ccm.instance:case"ccm.instance":waiter.push([recursive,action[1],action[2],instance_or_array,key,instance]);break;case ccm.proxy:case"ccm.proxy":proxy(action[1],action[2],instance_or_array,key,instance);break;case ccm.store:case"ccm.store":counter++;if(!action[1])action[1]={};action[1].delayed=true;ccm.store(action[1],setResult);break;case ccm.dataset:case"ccm.dataset":counter++;ccm.dataset(action[1],action[2],setResult);break}function setResult(result){instance_or_array[key]=result;check()}function proxy(component,config,instance_or_array,key,parent){ccm.helper.isDependency(config)?ccm.dataset(config[1],config[2],proceed):proceed(config);function proceed(config){instance_or_array[key]={component:component,parent:parent,render:function(callback){delete this.component;delete this.render;if(!config)config={};ccm.helper.integrate(this,config);ccm.render(component,config,function(instance){instance_or_array[key]=instance;if(callback)callback()})}}}}}}function check(){counter--;if(counter===0){if(waiter.length>0)return ccm.helper.action(waiter.shift());initialize(result,function(){if(callback)callback(result)})}return counter===0?result:null}function initialize(instance,callback){var results=[instance];find(instance);var i=0;init();function find(obj){var inner=[];for(var key in obj){var value=obj[key];if(ccm.helper.isInstance(value)&&key!=="parent"&&!ccm.helper.isProxy(value))inner.push(value);else if(Array.isArray(value)||ccm.helper.isObject(value)){if(ccm.helper.isNode(value)||ccm.helper.isElement(value)||ccm.helper.isComponent(value)||ccm.helper.isInstance(value))continue;inner.push(value)}}inner.map(function(obj){if(ccm.helper.isInstance(obj)||ccm.helper.isDatastore(obj))results.push(obj)});inner.map(function(obj){find(obj)})}function init(){if(i===results.length)return ready();var obj=results[i];i++;if(obj.init)obj.init(function(){delete obj.init;init()});else init()}function ready(){if(results.length===0)return callback();var obj=results.pop();delete obj.init;if(obj.ready){var tmp=obj.ready;delete obj.ready;tmp(ready)}else ready()}}}}}},render:function(component,config,callback){if(typeof config==="function"){callback=config;config=undefined}ccm.instance(component,config,function(instance){instance.render(function(){if(callback)callback(instance)})})},store:function(settings,callback){if(typeof settings==="function"){callback=settings;settings=undefined}if(!settings)settings={};if(typeof settings==="string"||ccm.helper.isObject(settings)&&!settings.local&&!settings.store&&!settings.url&&!settings.delayed&&!settings.user)settings={local:settings};settings=ccm.helper.clone(settings);var source=getSource(settings);if(stores[source]){if(callback)callback(stores[source]);return stores[source]}if(!settings.source)settings.source=source;if(!settings.local)settings.local={};return typeof settings.local==="string"?ccm.load(settings.local,proceed):proceed(settings.local);function proceed(datasets){settings.local=datasets;return settings.store&&!settings.url?prepareDB(proceed):proceed();function prepareDB(callback){!db?openDB(proceed):proceed();function openDB(callback){var request=indexedDB.open("ccm");request.onsuccess=function(){db=this.result;callback()}}function proceed(){!db.objectStoreNames.contains(settings.store)?updateDB(callback):callback();function updateDB(callback){var version=parseInt(localStorage.getItem("ccm"));if(!version)version=1;db.close();var request=indexedDB.open("ccm",version+1);request.onupgradeneeded=function(){db=this.result;localStorage.setItem("ccm",db.version);db.createObjectStore(settings.store,{keyPath:"key"})};request.onsuccess=callback}}}function proceed(){var store=new Datastore;ccm.helper.integrate(settings,store);if(store.url&&store.url.indexOf("ws")===0){var message=[store.db,store.store];if(store.datasets)message=message.concat(store.datasets);store.socket=new WebSocket(store.url,"ccm");store.socket.onopen=function(){this.send(message);proceed()}}else return proceed();function proceed(){delete store.datasets;if(!store.delayed){store.init();delete store.init}else delete store.delayed;stores[source]=store;if(callback)callback(store);return store}}}},dataset:function(settings,key_or_query,callback){var store=ccm.store(settings,function(store){store.get(key_or_query,callback)});if(store)return store.get(key_or_query)},context:{find:function(instance,property){var start=instance;while(instance=instance.parent)if(instance[property]&&instance[property]!==start)return instance[property]},root:function(instance){while(instance.parent)instance=instance.parent;return instance}},helper:{action:function(action,context){if(typeof action==="function")return action();if(typeof action!=="object"){action=action.split(" ")}if(typeof action[0]==="function")return action[0].apply(window,action.slice(1));else if(action[0].indexOf("this.")===0)return this.executeByName(action[0].substr(5),action.slice(1),context);else return this.executeByName(action[0],action.slice(1))},catchComponentTags:function(instance,callback){var counter=1;if(!Array.isArray(instance.childNodes))return callback();instance.childInstances={};recursive(instance.childNodes);check();function recursive(children){children.map(function(child,i){if(!child.tagName)return;if(child.tagName.indexOf("CCM-")!==0)return recursive(ccm.helper.makeIterable(child.childNodes));var split=child.tagName.toLowerCase().split("-");if(split[1]===instance.component.name&&split.length>2)return;counter++;if(split.length<3)split[2]=split[1];var id="ccm-"+instance.index+"-"+split[2];var config=ccm.helper.generateConfig(child);config.parent=instance;config.element=jQuery("#"+id);var div=document.createElement("div");div.setAttribute("id",id);if(child.parentNode)child.parentNode.replaceChild(div,child);else children[i]=div;closure(instance,split[1],config,split[2]);function closure(instance,name,config,key){var component=ccm.context.find(instance,name);if(ccm.helper.isComponent(component)&&component.name===name)component.instance(config,proceed);else ccm.instance(name,config,proceed);function proceed(result){instance.childInstances[key]=result;check()}}})}function check(){counter--;if(counter==0)callback()}},clone:function(obj,flat){return ccm.helper.isObject(obj)||Array.isArray(obj)?jQuery.extend(!flat,{},obj):obj},dataset:function(obj,callback){if(!ccm.helper.isObject(obj)){if(callback)callback();return undefined}if(ccm.helper.isDatastore(obj))obj={store:obj};if(!ccm.helper.isDatastore(obj.store)){obj=ccm.helper.clone(obj);if(callback)callback(obj);return obj}return obj.store.get(obj.key||null,function(dataset){if(!callback)return;var exists=dataset!==null;if(!exists)callback({key:obj.key||ccm.helper.generateConfig()},true);else callback(dataset)})},dataSource:function(data){return ccm.helper.isDatastore(data.store)?{key:data.key,store:data.store.source(),dataset:data.store.get(data.key)}:data},element:function(instance){ccm.helper.reselect(instance);var name=instance.component.name;if(jQuery.isArray(instance.classes))instance.classes=instance.classes.join(" ");instance.element.html('<div id="ccm-'+instance.index+'" class="ccm '+(instance.classes?instance.classes:"ccm-"+name)+'"></div>');var element=instance.element.find('div[id="ccm-'+instance.index+'"]');ccm.helper.loading(element);return element},executeByName:function(functionName,args,context){if(!context)context=window;var namespaces=functionName.split(".");functionName=namespaces.pop();for(var i=0;i<namespaces.length;i++)context=context[namespaces[i]];return context[functionName].apply(context,args)},filter:function(priodata,dataset){priodata=ccm.helper.clone(priodata);for(var i in priodata)if(priodata[i]===dataset[i])delete priodata[i]},find:function(instance,element,selector){if(typeof element==="string"){selector=element;element=undefined}if(!element)element=instance.element;return element.find(selector+":not(.ccm, #ccm-"+instance.index+" .ccm *)")},focusInput:function(input,position){input=input.get(0);if(position===undefined)position=input.value.length;input.selectionStart=input.selectionEnd=position;input.focus()},format:function(string,values){var functions=[[],[]];string=JSON.stringify(string,function(key,val){if(typeof val==="function"){functions[0].push(val);return"%f0%"}return val});for(var i=1;i<arguments.length;i++){if(typeof arguments[i]==="function"){functions[1].push(arguments[i]);arguments[i]="%f1%"}if(typeof arguments[i]==="object")for(var key in arguments[i]){if(typeof arguments[i][key]==="function"){functions[1].push(arguments[i][key]);arguments[i][key]="%f1%"}if(typeof arguments[i][key]==="string")arguments[i][key]=escape(arguments[i][key]);string=string.replace(new RegExp("%"+key+"%","g"),arguments[i][key])}else{if(typeof arguments[i]==="string")arguments[i]=escape(arguments[i]);string=string.replace(/%%/,arguments[i])}}return JSON.parse(string,function(key,val){if(val==="%f0%")return functions[0].shift();if(val==="%f1%")return functions[1].shift();return val});function escape(string){return string.replace(/"/g,"'").replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f")}},formData:function(form){form.find("input[type=checkbox]").each(function(){var checkbox=jQuery(this);if(!checkbox.is(":checked")){checkbox.attr("data-input",checkbox.attr("value"));checkbox.attr("value","")}checkbox.prop("checked",true)});var data=form.serializeArray();form.find('input[type=checkbox][value=""]').each(function(){var checkbox=jQuery(this);checkbox.prop("checked",false);checkbox.attr("value",checkbox.attr("data-input"));checkbox.removeAttr("data-input")});var result={};for(var i=0;i<data.length;i++)result[data[i]["name"]]=data[i]["value"];return result},generateConfig:function(node){var config={};catchAttributes(node,config);catchInnerTags(node);return config;function catchAttributes(node,obj){ccm.helper.makeIterable(node.attributes).map(function(attr){if(attr.name!=="src"||node.tagName.indexOf("CCM-COMPONENT")!==0&&node.tagName.indexOf("CCM-INSTANCE")!==0&&node.tagName.indexOf("CCM-PROXY")!==0)try{obj[attr.name]=attr.value.charAt(0)==="{"||attr.value.charAt(0)==="["?JSON.parse(attr.value):attr.value}catch(err){}})}function catchInnerTags(node){config.childNodes=[];ccm.helper.makeIterable(node.childNodes).map(function(child){if(child.tagName&&child.tagName.indexOf("CCM-")===0){var split=child.tagName.toLowerCase().split("-");if(split.length<3)split[2]=split[1];switch(split[1]){case"load":ccm.helper.value(config,split[2],interpretLoadTag(child,split[2]));break;case"component":case"instance":case"proxy":ccm.helper.value(config,split[2],["ccm."+split[1],child.getAttribute("src")||split[2],ccm.helper.generateConfig(child)]);break;case"store":case"dataset":var settings={};catchAttributes(child,settings);var key=settings.key;delete settings.key;ccm.helper.value(config,split[2],["ccm."+split[1],settings,key]);break;case"list":var list=null;ccm.helper.makeIterable(child.children).map(function(entry){if(entry.tagName&&entry.tagName.indexOf("CCM-ENTRY")===0){var split=entry.tagName.toLowerCase().split("-");if(!list)list=split.length<3?[]:{};if(split.length<3)list.push(entry.getAttribute("value"));else ccm.helper.value(list,split[2],entry.getAttribute("value"))}});if(list)ccm.helper.value(config,split[2],list);break;default:config.childNodes.push(child);node.removeChild(child)}}else{config.childNodes.push(child);node.removeChild(child)}});function interpretLoadTag(node){var params=generateParameters(node);if(!Array.isArray(params))params=[params];params.unshift("ccm.load");return params;function generateParameters(node){if(node.hasAttribute("src")){if(node.children.length===0)return node.getAttribute("src");var data={};ccm.helper.makeIterable(node.children).map(function(child){if(child.tagName&&child.tagName.indexOf("CCM-DATA-")===0)data[child.tagName.toLowerCase().split("-")[2]]=child.getAttribute("value")});return[node.getAttribute("src"),data]}var params=[];ccm.helper.makeIterable(node.children).map(function(child){if(child.tagName==="CCM-SERIAL"&&(node.tagName==="CCM-PARALLEL"||node.tagName.indexOf("CCM-LOAD")===0)||child.tagName==="CCM-PARALLEL"&&node.tagName==="CCM-SERIAL")params.push(generateParameters(child))});return params}}}},generateKey:function(){return Date.now()+"X"+Math.random().toString().substr(2)},getCursor:function(input){return input.get(0).selectionStart},getElementID:function(instance){return"ccm-"+instance.index},html:function(html,values){if(arguments.length>1)html=ccm.helper.format.apply(this,arguments);if(jQuery.isArray(html)){var result=[];for(var i=0;i<html.length;i++)result.push(ccm.helper.html(html[i]));return result}if(typeof html==="string")html=ccm.helper.val(html,true);if(typeof html!=="object")return html;if(Object.keys(html).toString()==="key,inner")return ccm.helper.html(html.inner);var element=jQuery("<"+ccm.helper.val(html.tag||"div",true)+">");delete html.tag;delete html.key;for(var key in html){var value=html[key];switch(key){case"async":case"checked":case"disabled":case"readonly":case"required":case"selected":if(value&&value!=="undefined"&&value!=="false")element.prop(key,true);break;case"inner":element.html(this.html(value));break;case"onblur":element.blur(value);break;case"onchange":element.change(value);break;case"onclick":element.click(value);break;case"ondblclick":element.dblclick(value);break;case"oninput":element.on("input",value);break;case"onmouseenter":element.mouseenter(value);break;case"onsubmit":element.submit(value);break;default:element.attr(key,ccm.helper.val(value,true))}}return element},htmlEncode:function(value,trim,quot){if(typeof value!=="string")value=value.toString();value=trim||trim===undefined?value.trim():value;value=jQuery("<div>").text(value).text();value=quot||quot===undefined?value.replace(/"/g,"&quot;"):value;return value},htmlDecode:function(value){return jQuery("<div>").html(value).text()},integrate:function(priodata,dataset){if(!priodata)return dataset;if(!dataset)return priodata;for(var key in priodata){ccm.helper.value(dataset,key,priodata[key])}return dataset},isComponent:function(value){return ccm.helper.isObject(value)&&value.Instance&&true},isDataset:function(value){return ccm.helper.isObject(value)},isDatastore:function(value){return ccm.helper.isObject(value)&&value.get&&value.set&&value.del&&true},isDependency:function(value){if(jQuery.isArray(value))if(value.length>0)switch(value[0]){case ccm.load:case"ccm.load":case ccm.component:case"ccm.component":case ccm.instance:case"ccm.instance":case ccm.proxy:case"ccm.proxy":case ccm.render:case"ccm.render":case ccm.store:case"ccm.store":case ccm.dataset:case"ccm.dataset":return true}return false},isElement:function(value){return value instanceof jQuery},isInDOM:function(instance){return ccm.helper.tagExists(jQuery("#ccm-"+instance.index))},isInstance:function(value){return ccm.helper.isObject(value)&&value.component&&true},isNode:function(value){return value instanceof Node},isObject:function(value){return typeof value==="object"&&value!==null&&!Array.isArray(value)},isProxy:function(value){return ccm.helper.isInstance(value)&&typeof value.component==="string"},isSubset:function(obj,other){for(var i in obj)if(typeof obj[i]==="object"&&typeof other[i]==="object"){if(JSON.stringify(obj[i])!==JSON.stringify(other[i]))return false}else if(obj[i]!==other[i])return false;return true},loading:function(element){(element?element:jQuery("body")).html(jQuery("<div>").css({display:"inline-block",width:"0.5em",height:"0.5em",border:"0.15em solid #009ee0","border-right-color":"transparent","border-radius":"50%",animation:"ccm_loading 1s linear infinite"}))},makeIterable:function(array){return Array.prototype.slice.call(array)},noScript:function(value){var div=jQuery("<div>").html(value);div.find("script").remove();return div.html()},privatize:function(instance,properties){var obj={};if(properties)for(var i=1;i<arguments.length;i++){var key=arguments[i];if(instance[key]!==undefined)obj[key]=instance[key];delete instance[key]}else for(var key in instance)switch(key){case"childNodes":case"component":case"element":case"id":case"index":case"init":case"ready":case"render":break;default:if(instance[key]!==undefined)obj[key]=instance[key];delete instance[key]}return obj},regex:function(index){switch(index){case"filename":return/^(ccm.)?([^.-]+)(-(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)\.(0|[1-9][0-9]*))?(\.min)?(\.js)$/;case"key":return/^[a-z_0-9][a-zA-Z_0-9]*$/;case"name":return/^[a-z][a-z_0-9]*$/;case"tag":return/^[a-z][a-zA-Z]*$/;case"url":return/^(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]*)+)?([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?$/}},reselect:function(instance){if(ccm.helper.isInstance(instance))if(ccm.helper.isElement(instance.element))if(instance.element.selector)instance.element=jQuery(instance.element.selector)},solveDependency:function(obj,key,callback){obj[key].push(function(result){obj[key]=result;callback(result)});return ccm.helper.action(obj[key])},tagExists:function(element){return element.closest("html").length>0},val:function(string,regex){if(!regex)return ccm.helper.noScript(string);if(regex===true)return ccm.helper.htmlEncode(string);return(typeof regex==="string"?ccm.helper.regex(regex):regex).test(string)?string:null},value:function(obj,key,value){return recursive(obj,key.split("."),value);function recursive(obj,key,value){if(!obj)return;var next=key.shift();if(key.length===0)return value!==undefined?obj[next]=value:obj[next];if(!obj[next]&&value!==undefined)obj[next]={};return recursive(obj[next],key,value)}},wait:function(time,callback){window.setTimeout(callback,time)}}};function getIndex(url){if(url.indexOf(".js")===-1)return url;var filename=url.split("/").pop();var regex=ccm.helper.regex("filename");if(!regex.test(filename))return"";var split=filename.split(".");if(split[0]==="ccm")split.shift();split.pop();if(split[split.length-1]==="min")split.pop();return split.join(".")}function getSource(settings){var source=JSON.stringify(settings);if(source==="{}"||source==='{"delayed":true}')source=Object.keys(stores).length;return source}}();